# サポート報告書WEBシステム 画面設計基本方針

**作成日**: 2025-11-21  
**バージョン**: 1.0  
**Phase**: 02

---

## 1. 概要

本書は、サポート報告書WEBシステムの画面設計における統一的な設計方針を定めたものです。
Phase 03（基本設計）以降の画面設計作業において、本方針に従って設計を行います。

---

## 2. 設計の基本原則

### 2.1 基本コンセプト
- **使いやすさ最優先**: ユーザーが直感的に操作できるUI
- **既存システムとの連続性**: Accessシステムからの移行をスムーズに
- **レスポンシブ対応**: PC/Tablet/SPで最適な表示
- **視認性の確保**: 文字サイズ、色使いを適切に

### 2.2 参考システム
既存のois-webシステムの設計思想を踏襲し、社内システムとしての統一感を保つ。

---

## 3. レイアウト方針

### 3.1 全体構造

```
┌────────────────────────────────────┐
│         ヘッダーエリア              │
│   ロゴ/システム名/ユーザー名/ログアウト │
├────────────────────────────────────┤
│                                    │
│         コンテンツエリア            │
│                                    │
│   ・メインコンテンツ               │
│   ・検索フォーム（アコーディオン）   │
│   ・一覧表示                       │
│   ・入力ダイアログ（モーダル）      │
│                                    │
├────────────────────────────────────┤
│         フッターエリア              │
│   著作権表示/バージョン情報         │
└────────────────────────────────────┘
```

### 3.2 ヘッダーエリア

#### 3.2.1 構成要素
- **システム名**: 左上に配置
- **ユーザー名**: 右上に表示（「ログイン中: ○○○○」）
- **ログアウトボタン**: 右上に配置

#### 3.2.2 レスポンシブ対応
| デバイス | 表示内容 |
|---------|---------|
| PC | 全て表示 |
| Tablet | システム名を略称に、ユーザー名は表示 |
| SP | システム名のみ、ハンバーガーメニュー化 |

### 3.3 コンテンツエリア

#### 3.3.1 基本レイアウト
- **最大幅**: 1200px（PCの場合）
- **マージン**: 左右に20px
- **パディング**: 各要素間に適切な余白

#### 3.3.2 検索エリア（アコーディオン形式）
```html
<div class="search-area">
    <div class="accordion-header">
        <span>検索条件</span>
        <span class="icon">▼</span>
    </div>
    <div class="accordion-content">
        <!-- 検索フォーム -->
    </div>
</div>
```

- **初期状態**: 閉じた状態
- **クリック動作**: 開閉をトグル
- **アニメーション**: スライドダウン・スライドアップ（0.3秒）

#### 3.3.3 一覧表示エリア
- **テーブル形式**: 水平スクロール対応
- **固定ヘッダー**: 縦スクロール時もヘッダーを固定
- **行ホバー**: マウスオーバー時に背景色変更
- **ページネーション**: 下部に配置

### 3.4 フッターエリア

#### 3.4.1 表示内容
- **著作権表示**: "© 2025 OIS"
- **バージョン情報**: "Version 1.0.0"

---

## 4. 入力フォーム設計

### 4.1 基本レイアウト

#### 4.1.1 PC版レイアウト
```
┌─────────────────────────────┐
│ ラベル      │ 入力欄         │
├─────────────────────────────┤
│ 受付日 *    │ [2025-11-21]  │
│ 担当者 *    │ [山田太郎▼]   │
│ 顧客名      │ [         ]    │
│ ...                          │
└─────────────────────────────┘
```

- **ラベル幅**: 150px固定
- **入力欄**: 残りの幅を使用
- **必須マーク**: ラベルの後ろに赤字で「*」を表示

#### 4.1.2 Tablet/SP版レイアウト
```
┌──────────────────┐
│ ラベル *         │
│ [入力欄]         │
├──────────────────┤
│ ラベル           │
│ [入力欄]         │
└──────────────────┘
```

- **ラベルと入力欄を縦並び**
- **入力欄の幅**: 100%使用

### 4.2 入力項目の配置ルール

#### 4.2.1 必須項目
- ラベルの後ろに赤字で「*」を表示
- 未入力時はエラーメッセージを表示

#### 4.2.2 任意項目
- 必須マークなし
- 入力は任意

#### 4.2.3 入力項目の順序
1. 日付項目（受付日等）
2. 担当者・顧客情報
3. 商品情報
4. 対応区分・対応内容項目
5. 対応内容（テキストエリア）
6. 備考等

### 4.3 入力部品の設計

#### 4.3.1 テキストボックス
```html
<input type="text" name="kokyaku_name" id="kokyaku-name" value="" class="input-text" />
```

- **クラス**: `input-text`
- **幅**: PCは300px、Tablet/SPは100%
- **高さ**: 32px
- **フォント**: 14px
- **パディング**: 左右8px
- **ボーダー**: 1px solid #ccc
- **フォーカス時**: ボーダー色を青に変更

#### 4.3.2 テキストエリア
```html
<textarea name="taiou_naiyo" id="taiou-naiyo" rows="10" class="input-textarea"></textarea>
```

- **クラス**: `input-textarea`
- **幅**: 100%
- **高さ**: 10行（rows=10）
- **リサイズ**: 縦方向のみ可能
- **フォント**: 14px
- **パディング**: 8px

#### 4.3.3 プルダウン（セレクトボックス）
```html
<select name="tantousha_code" id="tantousha-code" class="input-select">
    <option value="">選択してください</option>
    <option value="001">山田太郎</option>
</select>
```

- **クラス**: `input-select`
- **幅**: PCは300px、Tablet/SPは100%
- **高さ**: 32px
- **フォント**: 14px

#### 4.3.4 日付入力
```html
<input type="date" name="uketsuke_date" id="uketsuke-date" class="input-date" />
```

- **クラス**: `input-date`
- **幅**: 200px
- **高さ**: 32px
- **カレンダーピッカー**: ブラウザ標準機能を使用

#### 4.3.5 チェックボックス
```html
<label class="checkbox-label">
    <input type="checkbox" name="taiou_naiyo[]" value="1" />
    <span>電話対応</span>
</label>
```

- **クラス**: `checkbox-label`
- **チェックボックスサイズ**: 16px × 16px
- **ラベル間隔**: 左に8px
- **複数選択**: 縦並びまたは2列表示

#### 4.3.6 ラジオボタン
```html
<label class="radio-label">
    <input type="radio" name="taiou_kubun" value="1" />
    <span>対応完了</span>
</label>
```

- **クラス**: `radio-label`
- **ラジオボタンサイズ**: 16px × 16px
- **ラベル間隔**: 左に8px

### 4.4 エラー表示の方法

#### 4.4.1 エラーメッセージの配置
```html
<div class="error-box">
    <p>【エラー】受付日を入力してください。</p>
    <p>【エラー】担当者を選択してください。</p>
</div>
```

- **クラス**: `error-box`
- **配置**: フォームの上部
- **背景色**: #ffeeee
- **文字色**: #cc0000
- **ボーダー**: 1px solid #cc0000
- **パディング**: 10px
- **マージン**: 下に20px

#### 4.4.2 項目別エラー表示
```html
<div class="form-group error">
    <label>受付日 *</label>
    <input type="date" name="uketsuke_date" class="input-date error" />
    <span class="error-text">受付日を入力してください。</span>
</div>
```

- **クラス**: `error`を追加
- **エラーテキスト**: 項目の下に赤字で表示
- **入力欄のボーダー**: 赤色に変更

### 4.5 バリデーション方針

#### 4.5.1 クライアントサイド（JavaScript）
- **即時バリデーション**: フォーカスアウト時
- **送信前バリデーション**: submitイベント時
- **エラー表示**: 項目ごとにエラーメッセージ表示

#### 4.5.2 サーバーサイド（PHP）
- **必須チェック**: 全ての必須項目
- **形式チェック**: 日付、メールアドレス等
- **文字数制限チェック**: 各項目のmax length
- **重複チェック**: 必要に応じて実施

---

## 5. 一覧表示設計

### 5.1 テーブルレイアウト

#### 5.1.1 PC版
```html
<table class="data-table">
    <thead>
        <tr>
            <th>報告書ID</th>
            <th>受付日</th>
            <th>顧客名</th>
            <th>対応区分</th>
            <th>担当者</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>12345</td>
            <td>2025-11-21</td>
            <td>株式会社サンプル</td>
            <td>対応完了</td>
            <td>山田太郎</td>
            <td>
                <button class="btn-edit">編集</button>
                <button class="btn-delete">削除</button>
            </td>
        </tr>
    </tbody>
</table>
```

- **クラス**: `data-table`
- **ボーダー**: 全体に1px solid #ddd
- **ヘッダー背景**: #f5f5f5
- **行の高さ**: 40px
- **パディング**: 左右10px

#### 5.1.2 Tablet/SP版
- **カード形式で表示**
- **各項目を縦並びに配置**
- **操作ボタンは下部に配置**

```html
<div class="data-card">
    <div class="card-header">
        <span class="card-id">12345</span>
        <span class="card-date">2025-11-21</span>
    </div>
    <div class="card-body">
        <p><strong>顧客名:</strong> 株式会社サンプル</p>
        <p><strong>対応区分:</strong> 対応完了</p>
        <p><strong>担当者:</strong> 山田太郎</p>
    </div>
    <div class="card-footer">
        <button class="btn-edit">編集</button>
        <button class="btn-delete">削除</button>
    </div>
</div>
```

### 5.2 ソート機能

#### 5.2.1 ソート対応列
- **報告書ID**: 昇順・降順
- **受付日**: 昇順・降順（デフォルト: 降順）
- **顧客名**: 昇順・降順（50音順）

#### 5.2.2 ソート表示
```html
<th class="sortable" data-column="uketsuke_date" data-order="desc">
    受付日 <span class="sort-icon">▼</span>
</th>
```

- **ソート可能な列**: クラス`sortable`を追加
- **ソートアイコン**: ▲（昇順）/ ▼（降順）
- **クリック動作**: Ajaxでデータ再取得

### 5.3 ページング機能

#### 5.3.1 ページネーション表示
```html
<div class="pagination">
    <a href="?page=1" class="btn-page">最初</a>
    <a href="?page=3" class="btn-page">前へ</a>
    <span class="page-info">4 / 10ページ</span>
    <a href="?page=5" class="btn-page">次へ</a>
    <a href="?page=10" class="btn-page">最後</a>
</div>
```

- **配置**: 一覧表の下部
- **1ページあたりの件数**: 50件（デフォルト）
- **件数変更**: プルダウンで25件/50件/100件を選択可能

### 5.4 行の選択と操作

#### 5.4.1 行のホバー
- マウスオーバー時に背景色を変更（#f9f9f9）
- カーソルをポインターに変更

#### 5.4.2 行のクリック
- 行クリックで詳細表示（モーダルダイアログ）
- 操作ボタン以外のクリックで動作

#### 5.4.3 操作ボタン
- **編集**: 青色のボタン（#007bff）
- **削除**: 赤色のボタン（#dc3545）
- **確認**: 削除時は必ず確認ダイアログを表示

---

## 6. ボタン配置

### 6.1 ボタンの種類

| ボタン種別 | 背景色 | 文字色 | 用途 |
|-----------|--------|--------|------|
| 主要ボタン | #007bff（青） | #ffffff | 登録、検索、保存 |
| 副次ボタン | #6c757d（グレー） | #ffffff | キャンセル、戻る |
| 削除ボタン | #dc3545（赤） | #ffffff | 削除 |
| 無効ボタン | #e9ecef（薄グレー） | #6c757d | 無効状態 |

### 6.2 ボタンサイズ

| サイズ | 幅 | 高さ | フォントサイズ |
|-------|-----|------|--------------|
| 大 | 180px | 44px | 16px |
| 中 | 120px | 36px | 14px |
| 小 | 80px | 28px | 12px |

### 6.3 ボタン配置ルール

#### 6.3.1 フォーム内のボタン
```html
<div class="button-area">
    <button type="submit" class="btn btn-primary">登録</button>
    <button type="button" class="btn btn-secondary">キャンセル</button>
</div>
```

- **配置**: フォームの下部
- **中央寄せ**: `text-align: center`
- **ボタン間隔**: 左右に10px

#### 6.3.2 一覧画面のボタン
- **新規登録ボタン**: 一覧表の上部右側
- **検索ボタン**: 検索フォーム内の下部

---

## 7. モーダルダイアログ

### 7.1 基本構造

```html
<div class="modal" id="input-modal">
    <div class="modal-overlay"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h2>サポート報告書登録</h2>
            <button class="modal-close">×</button>
        </div>
        <div class="modal-body">
            <!-- フォーム内容 -->
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary">登録</button>
            <button class="btn btn-secondary">キャンセル</button>
        </div>
    </div>
</div>
```

### 7.2 モーダルのサイズ

| サイズ | 幅 | 最大高さ |
|-------|-----|---------|
| 小 | 400px | 80% |
| 中 | 600px | 80% |
| 大 | 800px | 80% |
| 最大 | 90% | 90% |

### 7.3 モーダルの動作

#### 7.3.1 開く動作
```javascript
$('#input-modal').fadeIn(300);
$('body').addClass('modal-open'); // スクロール固定
```

#### 7.3.2 閉じる動作
```javascript
$('#input-modal').fadeOut(300);
$('body').removeClass('modal-open'); // スクロール解除
```

#### 7.3.3 閉じるトリガー
- ×ボタンをクリック
- オーバーレイをクリック
- キャンセルボタンをクリック
- Escキーを押下

### 7.4 特殊なモーダル

#### 7.4.1 定型文選択ダイアログ
- **サイズ**: 中（600px）
- **内容**: 定型文一覧をリスト表示
- **検索機能**: キーワードでフィルタリング
- **選択動作**: ダブルクリックまたは選択ボタン

#### 7.4.2 商品選択ダイアログ
- **サイズ**: 大（800px）
- **内容**: 商品一覧をテーブル表示
- **検索機能**: 商品コード・商品名で検索
- **選択動作**: チェックボックスで最大3件選択
- **選択確定**: OKボタンクリック

---

## 8. メッセージ表示

### 8.1 成功メッセージ

```html
<div class="message-box success">
    <p>サポート報告書を登録しました。</p>
</div>
```

- **クラス**: `message-box success`
- **背景色**: #d4edda
- **文字色**: #155724
- **ボーダー**: 1px solid #c3e6cb
- **アイコン**: ✓（緑色）
- **表示時間**: 5秒後に自動で非表示

### 8.2 エラーメッセージ

```html
<div class="message-box error">
    <p>【エラー】データの登録に失敗しました。</p>
</div>
```

- **クラス**: `message-box error`
- **背景色**: #f8d7da
- **文字色**: #721c24
- **ボーダー**: 1px solid #f5c6cb
- **アイコン**: ✗（赤色）
- **表示時間**: 手動で閉じるまで表示

### 8.3 確認メッセージ

```html
<div class="modal confirm-modal">
    <div class="modal-content">
        <p>本当に削除してもよろしいですか?</p>
        <div class="button-area">
            <button class="btn btn-danger">削除</button>
            <button class="btn btn-secondary">キャンセル</button>
        </div>
    </div>
</div>
```

- **モーダルダイアログで表示**
- **削除ボタン**: 赤色
- **キャンセルボタン**: グレー
- **背景オーバーレイ**: 半透明黒

---

## 9. カラースキーム

### 9.1 基本色

| 用途 | カラーコード | 説明 |
|------|-------------|------|
| 主要色 | #007bff | リンク、主要ボタン |
| 副次色 | #6c757d | 副次ボタン、ヘッダー |
| 成功色 | #28a745 | 成功メッセージ |
| 警告色 | #ffc107 | 警告メッセージ |
| 危険色 | #dc3545 | エラーメッセージ、削除ボタン |
| 背景色 | #ffffff | ページ背景 |
| グレー背景 | #f5f5f5 | テーブルヘッダー等 |
| ボーダー色 | #ddd | 線・枠線 |
| テキスト色 | #333 | 基本テキスト |
| テキスト副色 | #666 | 補足テキスト |

### 9.2 状態による色変化

| 状態 | 変化 |
|------|------|
| ホバー | 10%暗くする |
| アクティブ | 20%暗くする |
| 無効 | 透明度50% |
| フォーカス | ボーダーを青に |

---

## 10. アイコン使用方針

### 10.1 使用するアイコン

| 用途 | アイコン | 説明 |
|------|---------|------|
| 編集 | ✎（鉛筆） | 編集ボタン |
| 削除 | ✗（バツ） | 削除ボタン |
| 検索 | 🔍（虫眼鏡） | 検索ボタン |
| 追加 | ＋（プラス） | 追加ボタン |
| 閉じる | ×（バツ） | モーダルを閉じる |
| 展開 | ▼（下矢印） | アコーディオン展開 |
| 折りたたみ | ▲（上矢印） | アコーディオン折りたたみ |
| ソート昇順 | ▲（上矢印） | テーブルソート |
| ソート降順 | ▼（下矢印） | テーブルソート |

### 10.2 アイコンライブラリ
- **Font Awesome**: 使用しない（軽量化のため）
- **Unicode文字**: 基本的なアイコンは文字で表現
- **画像アイコン**: 必要に応じてSVGまたはPNGを使用

---

## 11. レスポンシブ対応の詳細

### 11.1 デバイス別のブレークポイント

| デバイス | 画面幅 | CSS | 主な変更点 |
|---------|--------|-----|----------|
| PC | 1025px以上 | pc.css | 2カラム、テーブル表示 |
| Tablet | 768px～1024px | tablet.css | 2カラムまたは1カラム |
| SP | 767px以下 | sp.css | 1カラム、カード表示 |

### 11.2 PC版のレイアウト
- **フォーム**: ラベルと入力欄を横並び
- **一覧**: テーブル形式
- **ボタン**: 中サイズ（120px幅）

### 11.3 Tablet版のレイアウト
- **フォーム**: ラベルと入力欄を横並び（幅を調整）
- **一覧**: テーブル形式（横スクロール対応）
- **ボタン**: 中サイズ（120px幅）

### 11.4 SP版のレイアウト
- **フォーム**: ラベルと入力欄を縦並び
- **一覧**: カード形式
- **ボタン**: 大サイズ（180px幅）、タップしやすく

---

## 12. アクセシビリティ対応

### 12.1 基本方針
社内システムのため、WCAG等の厳密な準拠は不要だが、基本的な使いやすさは確保する。

### 12.2 実装事項

#### 12.2.1 キーボード操作
- **Tabキー**: 次の項目へ移動
- **Shift+Tab**: 前の項目へ移動
- **Enter**: ボタンクリック、フォーム送信
- **Esc**: モーダルを閉じる

#### 12.2.2 フォーカス表示
```css
input:focus, select:focus, textarea:focus, button:focus {
    outline: 2px solid #007bff;
    outline-offset: 2px;
}
```

#### 12.2.3 ラベルの関連付け
```html
<label for="kokyaku-name">顧客名 *</label>
<input type="text" name="kokyaku_name" id="kokyaku-name" />
```

#### 12.2.4 エラーメッセージの明示
- エラーがある項目を明確に示す
- エラー内容を具体的に記載
- 修正方法を提示

---

## 13. パフォーマンス対策

### 13.1 画像の最適化
- **ファイルサイズ**: 可能な限り小さく
- **形式**: PNG（透過）/ JPEG（写真）/ SVG（アイコン）
- **遅延読み込み**: 画像が多い場合は実装

### 13.2 CSSの最適化
- **ファイル分割**: PC/Tablet/SP用に分離
- **メディアクエリ**: link要素のmedia属性で制御
- **圧縮**: 本番環境ではminify化を検討

### 13.3 JavaScriptの最適化
- **外部ファイル化**: インラインスクリプトは最小限に
- **非同期読み込み**: 可能な限りasyncまたはdefer
- **ライブラリの選択**: jQuery 1.11（軽量版）

---

## 14. ブラウザ互換性

### 14.1 対応ブラウザ
- Google Chrome（最新版）
- Microsoft Edge（最新版）
- Firefox（最新版）
- Safari（最新版）

### 14.2 非対応ブラウザ
- Internet Explorer（全バージョン）

### 14.3 互換性確保方法
- **ベンダープレフィックス**: 必要に応じて追加
- **Polyfill**: 最小限の使用
- **クロスブラウザテスト**: 主要ブラウザで確認

---

## 15. まとめ

本画面設計基本方針に従って、Phase 03以降で各画面の詳細設計を行います。

**重要なポイント**:
1. **使いやすさを最優先**に設計する
2. **レスポンシブ対応**でどのデバイスでも快適に使用できる
3. **既存システムとの連続性**を保ち、ユーザーの学習コストを下げる
4. **一貫性のあるデザイン**で統一感を出す
5. **パフォーマンス**を考慮し、軽快に動作するシステムを目指す

---

**作成者**: Claude AI  
**承認者**: （プロジェクト責任者）  
**承認日**: （承認日を記入）  

**改訂履歴**:
- v1.0 (2025-11-21): 初版作成（Phase 02）
