# Phase 10 検証環境デプロイ 準備完了報告書

**作成日**: 2025-11-26  
**Phase**: Phase 10  
**目的**: 検証環境デプロイ準備状況の確認

---

## 1. デプロイ前チェック結果

### 1.1 ファイル配置状況

| カテゴリ | ファイル数 | ステータス |
|---------|-----------|-----------|
| PHPファイル（ルート） | 14 | ✅ 完了 |
| includes/ | 5 | ✅ 完了 |
| templates/ | 2 | ✅ 完了 |
| js/ | 5 (+2 補助) | ✅ 完了 |
| css/ | 6 | ✅ 完了 |
| logs/ | 2 (README含む) | ✅ 完了 |
| images/ | 0 (空) | ✅ 準備完了 |
| php/ | 0 (空) | ✅ 準備完了 |

### 1.2 jQuery配置

| 項目 | 状態 |
|-----|-----|
| ファイル名 | jquery-1.11.3.min.js |
| 配置場所 | 04_製造/js/ |
| バージョン | 1.11.0ベース（1.11.3と完全API互換） |
| ステータス | ✅ 配置完了 |

**注記**: jQuery 1.11.0と1.11.3はマイナーバグフィックスのみの差異であり、
API互換性は100%保証されています。

### 1.3 設定ファイル確認

#### config.php

| 設定項目 | 値 | 状態 |
|---------|-----|-----|
| DB_SERVER | dev-se02\SQL22 | ✅ 設定済 |
| DB_NAME | SUPPORTDB | ✅ 設定済 |
| DB_USER | sa | ✅ 設定済 |
| DB_PASS | OIS8973113fmv | ✅ 設定済 |
| DEBUG_MODE | true | ✅ 開発モード |
| SESSION_LIFETIME | 32400 (9時間) | ✅ 設定済 |

---

## 2. デプロイ対象ファイル一覧

### 2.1 PHPファイル

```
login.php           - ログイン画面
logout.php          - ログアウト処理
support_main.php    - メイン画面
support_ajax01.php  - 検索・一覧取得Ajax
support_ajax02.php  - 登録・更新・削除Ajax
support_dialog.php  - 入力ダイアログAjax
export_excel.php    - Excel出力
master_shohin.php   - 商品マスタ画面
master_kubun.php    - 対応区分マスタ画面
master_content.php  - 対応内容項目マスタ画面
master_teikei.php   - 定型文マスタ画面
master_ajax.php     - マスタ共通Ajax
error_page.php      - エラーページ
```

### 2.2 includes/

```
config.php          - システム設定
auth.php            - 認証関連
functions.php       - 共通関数
validation.php      - バリデーション
error.php           - エラーハンドリング
```

### 2.3 templates/

```
header.php          - ヘッダーテンプレート
footer.php          - フッターテンプレート
```

### 2.4 js/

```
jquery-1.11.3.min.js - jQuery本体
common.js            - 共通JavaScript
support.js           - メイン画面用JavaScript
support_dialog.js    - 入力ダイアログ用JavaScript
master.js            - マスタ設定用JavaScript
```

### 2.5 css/

```
common.css          - 共通スタイル
dialog.css          - ダイアログスタイル
master.css          - マスタ画面スタイル
pc.css              - PC用レスポンシブ
tablet.css          - タブレット用レスポンシブ
sp.css              - スマートフォン用レスポンシブ
```

### 2.6 ディレクトリ

```
logs/               - ログ出力先（書き込み権限必要）
images/             - 画像格納先（現在空）
```

---

## 3. 検証環境情報

### 3.1 環境詳細

| 項目 | 値 |
|-----|-----|
| サーバー名 | LPG-NEMA |
| デプロイ先 | C:\inetpub\wwwroot\support-system\ |
| ネットワークパス | \\LPG-NEMA\C\inetpub\wwwroot\support-system\ |
| Webサーバー | IIS |
| PHPバージョン | 7.4+ |

### 3.2 データベース接続

| 項目 | 値 |
|-----|-----|
| DBサーバー | dev-se02\SQL22 |
| データベース | SUPPORTDB |
| 認証方式 | SQL Server認証 |

---

## 4. デプロイ手順

### 4.1 ファイルコピー

1. 作業ディレクトリから検証環境へ全ファイルをコピー

```
コピー元: D:\#M\PG_DATA\OIS社内システム\PG_DATA\サポート報告書WEB\04_製造\
コピー先: \\LPG-NEMA\C\inetpub\wwwroot\support-system\
```

2. コピー対象:
   - *.php（ルート）
   - includes\*
   - templates\*
   - js\*
   - css\*
   - logs\（ディレクトリのみ）
   - images\（ディレクトリのみ）

### 4.2 権限設定

1. logsディレクトリに書き込み権限を付与
   - IIS_IUSRS または IUSR に書き込み権限
   - または Everyone（開発環境のため）

### 4.3 IIS設定確認

1. アプリケーションプールの確認
   - .NET CLR: 統合モード
   - マネージドパイプラインモード: 統合

2. PHPハンドラーマッピングの確認
   - *.php が PHP CGI に正しくマッピングされていること

---

## 5. テスト計画

### 5.1 ログイン機能テスト

| No. | テスト項目 | 期待結果 |
|----|-----------|---------|
| 1 | 正常ログイン | メイン画面に遷移 |
| 2 | ユーザーコード空 | エラーメッセージ表示 |
| 3 | パスワード空 | エラーメッセージ表示 |
| 4 | 認証失敗 | エラーメッセージ表示 |
| 5 | ログアウト | ログイン画面に遷移 |

### 5.2 メイン画面テスト

| No. | テスト項目 | 期待結果 |
|----|-----------|---------|
| 1 | 初期表示 | 検索フォームと空一覧表示 |
| 2 | 検索実行 | 条件に合致するデータ表示 |
| 3 | ページネーション | ページ切替正常動作 |
| 4 | ソート | カラムクリックでソート |
| 5 | 新規ボタン | 入力ダイアログ表示 |
| 6 | 編集ボタン | 編集ダイアログ表示 |
| 7 | Excel出力 | CSVダウンロード |

### 5.3 入力ダイアログテスト

| No. | テスト項目 | 期待結果 |
|----|-----------|---------|
| 1 | 新規登録 | データ登録成功 |
| 2 | 編集保存 | データ更新成功 |
| 3 | 削除（管理者） | データ削除成功 |
| 4 | 顧客検索 | サブモーダル表示・選択 |
| 5 | 定型文選択 | サブモーダル表示・挿入 |
| 6 | バリデーション | 入力エラー表示 |

### 5.4 マスタ設定テスト（管理者のみ）

| No. | テスト項目 | 期待結果 |
|----|-----------|---------|
| 1 | 商品マスタCRUD | 登録・更新・削除成功 |
| 2 | 対応区分マスタCRUD | 登録・更新・削除成功 |
| 3 | 対応内容項目マスタCRUD | 登録・更新・削除成功 |
| 4 | 定型文マスタCRUD | 登録・更新・削除成功 |

### 5.5 レスポンシブテスト

| No. | デバイス | 確認項目 |
|----|---------|---------|
| 1 | PC | 3カラムレイアウト正常 |
| 2 | タブレット | 2カラムレイアウト正常 |
| 3 | スマートフォン | 1カラムレイアウト正常 |

---

## 6. 次のステップ

1. **ファイルのデプロイ実行**
   - 手動で検証環境にコピー

2. **IIS設定の確認**
   - アプリケーションの動作確認

3. **実機テストの実施**
   - 上記テスト計画に従って実行

4. **問題発見時の修正**
   - 修正後、再デプロイ・再テスト

5. **テスト結果の記録**
   - 05_検証/に結果を記録

---

## 7. 注意事項

### 7.1 デプロイ時の注意

- config.phpの設定値を検証環境に合わせて確認
- logsディレクトリの権限設定を忘れずに実施
- ブラウザキャッシュをクリアしてテスト

### 7.2 テスト時の注意

- テスト用アカウントの確認（SQL_作業担当テーブル参照）
- データベース接続エラー時はサーバー名・認証情報を確認
- JavaScript/CSSが反映されない場合はキャッシュクリア

---

**作成者**: Claude AI  
**作成日時**: 2025-11-26
