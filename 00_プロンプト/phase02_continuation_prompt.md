# サポート報告書WEBシステム開発プロジェクト - Phase 02 継続

## プロジェクト概要

### 達成目標
現在Accessで動いているサポート報告書管理システムのWEB版をリリースする

### システム概要
自社の社員向けに、日々の顧客からの問い合わせや、それに対する対応を入力し、記録・分析を行うシステム

---

## 技術仕様

### 旧システム
- **DB**: SQL Server
- **DB接続**: PDO
- **データ操作**: ストアドプロシージャ（一部VBA）
- **フロント**: MS Access

### 新システム
- **DB**: SQL Server 2022（継続）
- **DB接続**: PDO（PHP）
- **データ操作**: ストアドプロシージャ（継続）/（一部PHP）
- **フロント**: PHP 7.4 / HTML / CSS / jQuery 1.11
- **CSSフレームワーク**: 独自CSS（参考システムを踏襲）
- **セキュリティ**: 社内ネットワーク限定

---

## ディレクトリ構成

### 作業ディレクトリ
```
D:\#M\PG_DATA\OIS社内システム\PG_DATA\サポート報告書WEB\
```

### ディレクトリ構造
```
サポート報告書WEB\
├── 00_プロンプト/              # フェーズ間プロンプト
├── 01_規約/                    # 開発規約・設計書
├── 02_分析/                    # 現行システム分析資料
├── 03_設計/                    # システム設計書
├── 04_製造/                    # 開発ソースコード
├── 05_検証/                    # テスト資料
└── ナレッジ/                   # 参考資料（既存）
```

---

## Phase 02 進捗状況

### ✅ 完了済みタスク（前チャットで完了）

#### 02_分析/に作成済み
1. ✅ **テーブル定義書.md** - 全テーブルの構造を整理
2. ✅ **ストアドプロシージャ一覧.md** - 全SPの役割と仕様を記録
3. ✅ **VBA処理分析結果.md** - VBAロジックのPHP化方針
4. ✅ **クエリ定義一覧.md** - 全クエリの整理と実装方針
5. ✅ **画面構成一覧.md** - 各画面の項目・機能整理
6. ✅ **画面遷移図.md** - 画面間の遷移フロー
7. ✅ **機能要件定義書.md** - システムが実現すべき機能
8. ✅ **データ移行方針.md** - 既存データの移行方法
9. ✅ **参考システム分析結果.md** - 参考システムの分析

---

## Phase 02 残タスク（本チャットで実施）

### ❌ 未完了タスク

#### 1. 非機能要件定義書.md（02_分析/）
**目的**: システムの性能、保守性、セキュリティ等の非機能要件を定義

**記載すべき内容**:
- **性能要件**
  - レスポンスタイム目標
  - 同時接続ユーザー数
  - データ量の想定
- **可用性要件**
  - 稼働時間（営業時間内のみ等）
  - バックアップ方針
  - 障害時の対応
- **保守性要件**
  - ログ出力方針
  - エラーハンドリング
  - システム監視
- **セキュリティ要件**
  - 認証方式（社内ネットワーク限定）
  - アクセス制御
  - データ保護
- **ユーザビリティ要件**
  - 対応ブラウザ
  - レスポンシブ対応（PC/Tablet/SP）
  - アクセシビリティ
- **互換性要件**
  - 既存データとの互換性
  - ブラウザ互換性
- **拡張性要件**
  - 将来的な機能拡張の考慮
  - スケーラビリティ

**参考情報**:
- 参考システム（ois-web）の非機能要件
- 社内ネットワーク環境の制約
- ユーザー数: 約10-20名程度（推定）

---

#### 2. 開発規約書.md（改訂版）（01_規約/）
**目的**: Phase 02の分析結果を踏まえて開発規約を改訂

**改訂すべき内容**:
- **VBA処理分析結果の反映**
  - PHP共通関数の追加（VBA互換関数等）
  - 日付処理関数の追加
  - 文字列処理関数の追加
- **クエリ定義の反映**
  - ストアドプロシージャ実装方針の明確化
  - Ajax通信の実装方針
  - ページング処理の実装方針
- **画面構成の反映**
  - 対応内容チェックボックス（20項目）の実装方針
  - 定型文選択ダイアログの実装方針
  - 商品選択（最大3件）の実装方針
- **データ移行方針の反映**
  - 既存データの取り扱い
  - SQL Serverローカルテーブル（SQL_*）の廃止方針

**改訂方法**:
- 既存の `開発規約書.md` を読み込み
- 上記内容を追記・修正
- バージョンを v1.1 に更新

---

#### 3. 画面設計基本方針.md（01_規約/）
**目的**: WEB画面設計の統一方針を定義

**記載すべき内容**:
- **レイアウト方針**
  - ヘッダー・コンテンツ・フッターの構造
  - PC/Tablet/SPでのレイアウト変更方針
  - 参考システム（ois-web）のレイアウトを踏襲
- **入力フォーム設計**
  - 入力項目の配置ルール
  - 必須項目の表示方法
  - エラー表示の方法
  - バリデーション方針
- **一覧表示設計**
  - テーブル表示の方針
  - ソート機能の実装
  - ページング機能の実装
  - 検索機能の配置（アコーディオン形式）
- **ボタン配置**
  - 主要ボタン（登録、更新、削除等）の配置ルール
  - ボタンのデザイン統一
- **モーダルダイアログ**
  - 入力ダイアログの設計方針
  - 確認ダイアログの設計方針
  - 定型文選択ダイアログの設計方針
- **メッセージ表示**
  - 成功メッセージの表示方法
  - エラーメッセージの表示方法
  - 確認メッセージの表示方法
- **カラースキーム**
  - 基本色の定義
  - ボタン色の定義
  - エラー色の定義
- **アイコン使用方針**
  - 使用するアイコンライブラリ
  - アイコンの使用ルール

**参考情報**:
- 既存画面のスクリーンショット（ナレッジ/スクリーンショット/）
- 参考システム（ois-web）の画面設計

---

#### 4. phase03_prompt.md（00_プロンプト/）
**目的**: Phase 03（基本設計）開始時のプロンプトを作成

**記載すべき内容**:
- **Phase 02完了状況のサマリー**
  - 完了した成果物一覧
  - 分析結果の要点
- **Phase 03の実施内容**
  - 画面設計書の作成
  - 機能設計書の作成
  - データフロー図の作成
- **Phase 03で作成する成果物**
  - 画面設計書（各画面ごと）
  - 機能設計書（各機能ごと）
  - データフロー図
  - API設計書（内部API）
- **Phase 03での注意事項**
  - Phase 02の分析結果を踏まえること
  - 開発規約書（改訂版）に従うこと
  - 画面設計基本方針に従うこと

---

## 実施手順

### ステップ1: 非機能要件定義書の作成
1. 性能要件、可用性要件、保守性要件等を整理
2. 社内ネットワーク限定の制約を考慮
3. `02_分析/非機能要件定義書.md` として保存

### ステップ2: 開発規約書の改訂
1. 既存の `01_規約/開発規約書.md` を読み込み
2. Phase 02の分析結果を反映
3. バージョンを v1.1 に更新して上書き保存

### ステップ3: 画面設計基本方針の作成
1. レイアウト、入力フォーム、一覧表示等の方針を定義
2. 参考システムのスクリーンショットを参考にする
3. `01_規約/画面設計基本方針.md` として保存

### ステップ4: Phase 03用プロンプトの作成
1. Phase 02の完了状況をまとめる
2. Phase 03の実施内容を明確にする
3. `00_プロンプト/phase03_prompt.md` として保存

---

## 参考情報

### 既存の規約・設計書
- `01_規約/開発規約書.md`
- `01_規約/コーディング規約書.md`
- `01_規約/ディレクトリ構造設計書.md`
- `01_規約/プロジェクト工程表.md`

### Phase 02完了済み分析資料
- `02_分析/テーブル定義書.md`
- `02_分析/ストアドプロシージャ一覧.md`
- `02_分析/VBA処理分析結果.md`
- `02_分析/クエリ定義一覧.md`
- `02_分析/画面構成一覧.md`
- `02_分析/画面遷移図.md`
- `02_分析/機能要件定義書.md`
- `02_分析/データ移行方針.md`
- `02_分析/参考システム分析結果.md`

### 参考資料
- `ナレッジ/スクリーンショット/` - 既存画面のキャプチャ
- `ナレッジ/SUPPORT_PG.accdb.AsText.20251118_1329/` - Accessの構造
- `C:\inetpub\func\` - 参考システムの共通関数
- `C:\inetpub\wwwroot\ois-web\` - 参考システムのWEBアプリ

---

## 重要な制約事項

### プロジェクト実行制約
1. **AI主導開発**: Claude AIが全工程を実施
2. **フェーズ管理**: フェーズごとに新規チャット
3. **プロンプト継承**: チャットを跨いでもプロジェクトの規約や工程を把握できるようにする
4. **日本語命名**: チャットのタイトルは日本語で命名

### 技術制約
1. **既存資産の活用**: SQL Serverデータベースとストアドプロシージャをそのまま継承
2. **標準技術の採用**: PHP + HTML + CSS + jQueryによる標準的なWEBアプリケーション構成
3. **参考システムの活用**: 既存のois-webシステムの構造・関数を参考にする
4. **社内ネットワーク限定**: セキュリティは社内ネットワーク前提で最小限

---

## 開始指示

上記の内容を踏まえて、Phase 02の残タスク（手順4〜6）を実施してください。

**実施順序**:
1. 非機能要件定義書の作成
2. 開発規約書の改訂（v1.1）
3. 画面設計基本方針の作成
4. Phase 03用プロンプトの作成

**重要事項**:
- 全ての成果物は作業ディレクトリ配下の適切な場所に出力してください
- Phase 02の分析結果を踏まえた内容にしてください
- Phase 03で画面設計を行うための十分な情報を記載してください
- 改訂版のドキュメントはバージョン番号を更新してください

---

**Phase 02 継続開始**: このプロンプトを新しいチャットで実行してください。  
**チャットタイトル（日本語）**: 「サポート報告書WEB化 Phase02 要件分析（継続）」

---

**前チャットでの作業内容**:
- VBA処理分析結果.md を作成（完了）
- クエリ定義一覧.md を作成（完了）
- トークン使用量: 約80,000 / 190,000 (42%)

**本チャットでの目標**:
- 残り4つの成果物を作成し、Phase 02を完了させる
- Phase 03への移行準備を整える
